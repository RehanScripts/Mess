<!DOCTYPE html>
<html lang="en">
<head>
    
   
    <title>Login Page</title>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    
    <form id="loginForm"><center> <h2>SMART MESS MANAGEMENT SYSTEM</h2></center>
<br>
        <p> Username : <input type="text" id="username" name="username" placeholder="Enter your username" required></p>
        <br>
        <p> Password : <input type="password" id="password" name="password" placeholder="Enter your password" required></p>
        <br>
     <center> <div class="options">
        <label><input type="checkbox"> Remember me</label>
        <a href="#">Forgot password?</a>
</div></center>
        <br>
        <center><button type="submit">Login</button></center> 

<br>
<center> Not Registered?  <a href="signup.html">Sign up</a></center> 
<br>
<center>
    <button type="button" id="adminPrefill" style="padding:6px 10px; border:1px solid #ccc; border-radius:6px; background:#f3f4f6; cursor:pointer;">Admin Login?</button>
    <div style="font-size:12px; color:#666; margin-top:6px;">Default: admin / admin123</div>
</center>
<br>

     </form>

<script>
// Intercept the form submit and send credentials to the backend
document.getElementById('loginForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const username = document.getElementById('username').value || '';
    const password = document.getElementById('password').value || '';

    try {
        const res = await fetch('/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, password })
        });
        const data = await res.json();
        if (data && data.success) {
            const role = data.user && data.user.role;
            if (role === 'admin') {
                window.location.href = 'admin_dashboard.html';
            } else {
                window.location.href = 'dashboard.html';
            }
        } else {
            alert('Login failed: ' + (data && data.error ? data.error : 'unknown_error'));
        }
    } catch (err) {
    console.error(err);
    alert('Server error. Please try again.');
    }
});

// Admin prefill helper
document.getElementById('adminPrefill')?.addEventListener('click', () => {
    const u = document.getElementById('username');
    const p = document.getElementById('password');
    if (u && p) {
        u.value = 'admin';
        p.value = 'admin123';
    }
});
</script>
</body>
</html>